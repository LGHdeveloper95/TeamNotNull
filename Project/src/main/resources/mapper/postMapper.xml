<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.guguin.post.mapper.PostMapper">

    <select id = "getPostList">
        SELECT BM.COMNAME AS COMNAME
             ,RECNUM
             ,REC.COMID  AS COMID
             ,RECTITLE
             ,SUBTITLE
             ,REC.BOSS  AS BOSS
             ,GCONTENT
             ,TO_CHAR(REG_DATE,'YYYY-MM-DD') AS REG_DATE
             ,TO_CHAR(DEADLINE,'YYYY-MM-DD') AS DEADLINE
             ,SIDO_CODE
             ,GUGUN_CODE
             ,REC.CAREER_CODE AS CAREER_CODE
             ,REC.EDU_CODE AS EDU_CODE
             ,BOOK_COUNT
             ,CA.CAREER_NAME AS CAREER_NAME
             ,EL.EDU_NAME AS EDU_NAME
        FROM RECRUIT REC LEFT JOIN BUSINESS_MEMBERS BM
        ON BM.COMID = REC.COMID JOIN CAREER CA
        ON REC.CAREER_CODE = CA.CAREER_CODE JOIN EDU_LIST EL
        ON REC.EDU_CODE = EL.EDU_CODE
        WHERE REC.COMID = #{comid}
    </select>
    <select id="getPost">
        SELECT BM.COMNAME AS COMNAME
             ,RECNUM
             ,REC.COMID  AS COMID
             ,RECTITLE
             ,SUBTITLE
             ,REC.BOSS  AS BOSS
             ,GCONTENT
             ,TO_CHAR(REG_DATE,'YYYY-MM-DD') AS REG_DATE
             ,TO_CHAR(DEADLINE,'YYYY-MM-DD') AS DEADLINE
             ,SIDO_CODE
             ,GUGUN_CODE
             ,REC.CAREER_CODE AS CAREER_CODE
             ,REC.EDU_CODE AS EDU_CODE
             ,BOOK_COUNT
             ,CA.CAREER_NAME AS CAREER_NAME
             ,EL.EDU_NAME AS EDU_NAME
        FROM RECRUIT REC LEFT JOIN BUSINESS_MEMBERS BM
        ON BM.COMID = REC.COMID JOIN CAREER CA
        ON REC.CAREER_CODE = CA.CAREER_CODE JOIN EDU_LIST EL
        ON REC.EDU_CODE = EL.EDU_CODE
        WHERE REC.RECNUM = #{recnum}
    </select>

    <select id="getCom">
    SELECT COMNUM
           ,CPHONE
           ,CADDR
           ,STARRATING
           ,BOSSEMAIL
     FROM BUSINESS_MEMBERS
    WHERE COMID=#{comid}
    </select>

    <update id="updatePost">
        UPDATE RECRUIT
        SET RECTITLE=#{rectitle}, SUBTITLE=#{subtitle}, GCONTENT=#{gcontent}
        WHERE RECNUM=#{recnum}
    </update>

    <delete id="deletePost">
        DELETE RECRUIT WHERE RECNUM=#{recnum}
    </delete>
</mapper>